<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>promise demo</title>
</head>
<body>

	<script>

			init()

			async function init(){

				//const result = await Promise.all([getData(),getOtherData()])

				const provindeData = await getData()

				const cityData =await getOtherData()

				//处理逻辑



			}
			




			function getData() {
			 	return new Promise((resolve,reject) => {
			 		const xhr = new XMLHttpRequest()
			 		xhr.open("GET","./city.json")
			 		xhr.onload = function(){
			 			resolve(JSON.parse(xhr.response))
			 		}
			 		xhr.onerror = function(){
			 			reject("失败原因")
					}
			 		xhr.ontimeout = function(){
			 			reject("失败原因")

			 		}
			 		xhr.onabort = function(){
			 			reject("失败原因")
					}
			 		xhr.send()
				})

			}

			// 获取其他数据
			
			function getOtherData(){


			 	return new Promise((resolve,reject) => {
			 		const xhr = new XMLHttpRequest()
			 		xhr.open("GET","./city.json")
			 		xhr.onload = function(){
			 			resolve(JSON.parse(xhr.response))
			 		}
			 		xhr.onerror = function(){
			 			reject("失败原因")
					}
			 		xhr.ontimeout = function(){
			 			reject("失败原因")

			 		}
			 		xhr.onabort = function(){
			 			reject("失败原因")
					}
			 		xhr.send()
				})


			}

	</script>



	
</body>
</html>