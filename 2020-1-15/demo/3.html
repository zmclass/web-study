<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>promise demo</title>
</head>
<body>

	<script>



			init()

			function init(){

				// Promise.all([getData(),getOtherData()]).then(data => {



				// })

				getData().then(value => {
					return getOtherData()
				}).then(value => {

				})


			}


			
			function getData() {
			 	return new Promise((resolve,reject) => {
			 		const xhr = new XMLHttpRequest()
			 		xhr.open("GET","./city.json")
			 		xhr.onload = function(){
			 			resolve(JSON.parse(xhr.response))
			 		}
			 		xhr.onerror = function(){
			 			reject("失败原因")
					}
			 		xhr.ontimeout = function(){
			 			reject("失败原因")

			 		}
			 		xhr.onabort = function(){
			 			reject("失败原因")
					}
			 		xhr.send()
				})

			}

			// 获取其他数据
			
			function getOtherData(){


			 	return new Promise((resolve,reject) => {
			 		const xhr = new XMLHttpRequest()
			 		xhr.open("GET","./city.json")
			 		xhr.onload = function(){
			 			resolve(JSON.parse(xhr.response))
			 		}
			 		xhr.onerror = function(){
			 			reject("失败原因")
					}
			 		xhr.ontimeout = function(){
			 			reject("失败原因")

			 		}
			 		xhr.onabort = function(){
			 			reject("失败原因")
					}
			 		xhr.send()
				})


			}

	</script>



	
</body>
</html>