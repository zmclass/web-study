<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>像素操作</title>
	<style>
		#c {
			border: 1px red solid;
			margin: 50px;
		}
	</style>
</head>
<body>
	<canvas id = "c" width = "600" height = "600"></canvas>

	<script>
		
		const cvs = document.getElementById("c");
		const context = cvs.getContext("2d");
		const image = new Image();
		image.src = "./1.jpg";

		image.onload = function(){
			context.drawImage(image,0,10,200,150)
			const imageData = context.getImageData(0,0,200,150)
			const data = imageData.data
			// 反转效果
			
			// for(let i = 0; i< data.length; i+=4){
			// 	data[i + 0] = 255 - data[i + 0]
			// 	data[i + 1] = 255 - data[i + 1]
			// 	data[i + 2] = 255 - data[i + 2]
			// }

			// 灰度效果
			// for(let i = 0; i< data.length; i+=4){
			// 	const average = (data[i + 0] + data[i+1] +data[i+2]) / 3
			// 	data[i + 0] = average
			// 	data[i + 1] = average
			// 	data[i + 2] = average
			// }	
			// 亮度效果
			// for(let i = 0; i< data.length; i+=4){
			// 	const light = -80
			// 	data[i + 0] += light
			// 	data[i + 1] += light
			// 	data[i + 2] += light
			// }

			//复古效果	
			// for(let i = 0; i< data.length; i+=4){
			// 	// const light = -80
			// 	// data[i + 0] += light
			// 	// data[i + 1] += light
			// 	// data[i + 2] += light
			// 	const r = data[i + 0]
			// 	const g = data[i + 1]
			// 	const b = data[i + 2]

			// 	data[i + 0] = r * 0.39 + g * 0.76 + b * 0.18
			// 	data[i + 1] = r * 0.35 + g * 0.68 + b * 0.18
			// 	data[i + 2] = r * 0.27 + g * 0.53 + b * 0.18
			// }
			//红色蒙版	
			// for(let i = 0; i< data.length; i+=4){
			// 	const average = (data[i + 0] + data[i+1] +data[i+2]) / 3
			// 	data[i + 0] = average
			// 	data[i + 1] = 0
			// 	data[i + 2] = 0
			// }
			//透明度处理
			for(let i = 0; i< data.length; i+=4){
				
				data[i + 0] *= .3
				data[i + 1] *= .3
				data[i + 2] *= .3
			}		

			
			context.putImageData(imageData,300,10)
		}




	</script>
	
</body>
</html>